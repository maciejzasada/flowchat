# Documentation

## i18n

It is a common practice to separate the actual strings from your application logic.
Chat bots are no different. Instead of explicitly returning full, hardcoded sentences from the sagas
it is better to use an i18n library. Here is how to do that with Flowchat.

As usual, achieving this kind of funcitonality is done by mapping either the `input`, `output` or
`state`. In this case we will be mapping the `output`.

#### i18n/en.json

```json
{
  "greeting": "Hello, user!"
}
```

#### i18n/pl.json

```json
{
  "greeting": "Witaj, uÅ¼ytkowniku!"
}
```

#### flows/hello.js

```javascript
import { send } from 'flowchat';

const activator = (input, state) => input === 'hello';

const reducer = (input, state) => state;

const saga = function* (input, state, sessionId) => {
  yield send('greeting'); // send the i18n key rather than actual value
}

export const helloFlow = [activator, reducer, saga];
```

#### flows/app.js

```javascript
import { Flowchat } from 'flowchat';

const I18N = {
  en: require('./i18n/en.json'),
  pl: require('./i18n/pl.json')
};

const bot = new Flowchat();
const session = {};

bot.state.subscribe(({ state, sessionId }) => session[sessionId] = state);

bot.output
  .map(({ data, sessionId }) => {
    const state = session[sessionId];
    return { data: I18N[state.locale][data], sessionId }; // translate the key into actual phrase
  })
  .subscribe(({ data, sessionId }) => {
    console.log(data);
  });

bot.input.onNext({ data: 'hello', state: { locale: 'en' }, sessionId: 1 });
// logs: "Hello, user!"
```
